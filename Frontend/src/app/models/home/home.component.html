<div class="home-page">
  <!-- SeÃ§Ã£o Superior: CalendÃ¡rio e FormulÃ¡rio lado a lado -->
  <div class="top-section">
    <!-- Card do CalendÃ¡rio -->
    <div class="calendar-card">
      <div class="card-header">
        <div class="header-content">
          <div>
            <h3>
              <span class="step-badge step-1">1</span>
              CalendÃ¡rio
            </h3>
            <p class="subtitle">Selecione uma data para agendar</p>
          </div>
          <button class="toggle-button" (click)="toggleCalendario()">
            <span *ngIf="calendarioVisivel">â–²</span>
            <span *ngIf="!calendarioVisivel">â–¼</span>
          </button>
        </div>
      </div>
      <div class="card-content" [class.collapsed]="!calendarioVisivel">
        <app-calendario tipo="Calendario"
                        (dataSelecionada)="onDataSelecionada($event)" />
        <div class="selected-date-info" *ngIf="dataExibicao">
          <span class="date-icon">ðŸ“…</span>
          <span class="date-text">{{ dataExibicao }}</span>
        </div>
      </div>
    </div>

    <!-- Card do FormulÃ¡rio Admin -->
    <div class="form-card" *ngIf="authService.isAdmin()">
      <div class="card-header">
        <div class="header-content">
          <div>
            <h3>
              <span class="step-badge step-2">2</span>
              Novo Agendamento
            </h3>
            <p class="subtitle">Preencha os dados para criar um agendamento</p>
          </div>
          <button class="toggle-button" (click)="toggleFormulario()">
            <span *ngIf="formularioVisivel">â–²</span>
            <span *ngIf="!formularioVisivel">â–¼</span>
          </button>
        </div>
      </div>
      <div class="card-content" [class.collapsed]="!formularioVisivel">
        <div class="form-grid">
          <app-autocomplete label="Aluno"
                            placeholder="Digite o nome do aluno..."
                            [options]="opcoesAlunos"
                            [(ngModel)]="alunoSelecionado">
          </app-autocomplete>

          <app-autocomplete label="PsicÃ³logo"
                            placeholder="Digite o nome do psicÃ³logo..."
                            [options]="opcoesPsicologos"
                            [(ngModel)]="psicologoSelecionado"
                            (ngModelChange)="onPsicologoChange($event)">
          </app-autocomplete>

          <app-select-horario label="HorÃ¡rio"
                              placeholder="Selecione o horÃ¡rio"
                              inicioExpediente="08:00"
                              fimExpediente="18:00"
                              [intervalo]="30"
                              [(ngModel)]="horario"
                              [bloqueios]="bloqueiosDia"
                              (ngModelChange)="verificarDisponibilidadeHorario()">
          </app-select-horario>
        </div>

        <div class="form-actions">
          <app-button button="Agendar"
                      (click)="agendarConsulta()"></app-button>
        </div>
      </div>
    </div>

    <!-- Card do FormulÃ¡rio PsicÃ³logo -->
    <div class="form-card" *ngIf="authService.isPsicologo()">
      <div class="card-header">
        <div class="header-content">
          <div>
            <h3>2- Bloquear HorÃ¡rio</h3>
            <p class="subtitle">Defina o perÃ­odo de indisponibilidade</p>
          </div>
          <button class="toggle-button" (click)="toggleFormulario()">
            <span *ngIf="formularioVisivel">â–²</span>
            <span *ngIf="!formularioVisivel">â–¼</span>
          </button>
        </div>
      </div>
      <div class="card-content" [class.collapsed]="!formularioVisivel">
        <div class="form-grid two-columns">
          <app-select-horario label="InÃ­cio"
                              placeholder="HorÃ¡rio de inÃ­cio"
                              inicioExpediente="08:00"
                              fimExpediente="18:00"
                              [intervalo]="30"
                              [(ngModel)]="horaInicio">
          </app-select-horario>

          <app-select-horario label="Fim"
                              placeholder="HorÃ¡rio de fim"
                              inicioExpediente="08:00"
                              fimExpediente="18:00"
                              [intervalo]="30"
                              [(ngModel)]="horaFim">
          </app-select-horario>
        </div>

        <div class="form-actions">
          <app-button button="Bloquear"
                      (click)="bloquearHorario()"></app-button>
        </div>
      </div>
    </div>
  </div>

  <!-- SeÃ§Ã£o Inferior: Tabela de Agendamentos -->
  <div class="table-card">
    <div class="card-header">
      <div class="header-content">
        <h3>Agendamentos</h3>
        <button class="toggle-button" (click)="toggleTabela()">
          <span *ngIf="tabelaVisivel">â–²</span>
          <span *ngIf="!tabelaVisivel">â–¼</span>
        </button>
      </div>
    </div>
    <div class="card-content table-content" [class.collapsed]="!tabelaVisivel">
      <app-tabela-agendamento />
    </div>
  </div>
</div>
