<div class="home-page">
  <div class="form-section">
    <app-calendario tipo="Calendario" (dataSelecionada)="onDataSelecionada($event)" />

    <div class="agendamento-form" *ngIf="authService.isAdmin()">
      <h3>Novo Agendamento</h3>
      <p class="form-instructions">Selecione uma data no calendário acima e preencha os dados abaixo: {{ dataExibicao || 'Nenhuma data selecionada' }}</p>

      <div class="form-row">
        <div class="form-column">
          <app-select
            label="Aluno"
            placeholder="Selecione um aluno"
            [options]="opcoesAlunos"
            [(ngModel)]="alunoSelecionado">
          </app-select>

          <app-select
            label="Psicólogo"
            placeholder="Selecione um psicólogo"
            [options]="opcoesPsicologos"
            [(ngModel)]="psicologoSelecionado"
            (ngModelChange)="onPsicologoChange($event)">
          </app-select>
        </div>

        <div class="form-column">
          <app-select-horario
            label="Horário"
            placeholder="Selecione o horário"
            inicioExpediente="08:00"
            fimExpediente="18:00"
            [intervalo]="30"
            [(ngModel)]="horario"
            [bloqueios]="bloqueiosDia"
            (ngModelChange)="verificarDisponibilidadeHorario()">
          </app-select-horario>
        </div>
      </div>

      <div class="form-actions">
        <app-button button="Agendar" (click)="agendarConsulta()"></app-button>
      </div>
    </div>

    <div class="agendamento-form" *ngIf="authService.isPsicologo()">
      <h3>Bloquear Horário</h3>
      <p class="form-instructions">Selecione a data e o intervalo que você não estará disponível: {{ dataExibicao || 'Nenhuma data selecionada' }}</p>

      <div class="form-row">
        <div class="form-column">
          <app-select-horario
            label="Início"
            placeholder="Selecione o horário de início"
            inicioExpediente="08:00"
            fimExpediente="18:00"
            [intervalo]="30"
            [(ngModel)]="horaInicio">
          </app-select-horario>
        </div>
        <div class="form-column">
          <app-select-horario
            label="Fim"
            placeholder="Selecione o horário de fim"
            inicioExpediente="08:00"
            fimExpediente="18:00"
            [intervalo]="30"
            [(ngModel)]="horaFim">
          </app-select-horario>
        </div>
      </div>

      <div class="form-actions">
        <app-button button="Bloquear" (click)="bloquearHorario()"></app-button>
      </div>
    </div>
  </div>

  <div class="table-section">
    <h3>Agendamentos</h3>
    <app-tabela-agendamento />
  </div>
</div>
