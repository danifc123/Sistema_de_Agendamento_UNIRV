<div class="editar-psicologo-page">
  <!-- Card Container -->
  <div class="content-card">
    <!-- Header com Título e Contador -->
    <div class="card-header">
      <div class="header-content">
        <div class="header-left">
          <h2>
            <span class="material-symbols-outlined">psychology</span>
            Gerenciar Psicólogos
          </h2>
          <p class="subtitle">Visualize, edite e gerencie os psicólogos cadastrados</p>
        </div>
        <div class="header-stats">
          <div class="stat-card">
            <span class="stat-number">{{dataSource.data.length}}</span>
            <span class="stat-label">Psicólogos</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Section -->
    <div class="search-section">
      <mat-form-field class="search-field" appearance="outline">
        <mat-label>Buscar psicólogo</mat-label>
        <span matPrefix class="material-symbols-outlined">search</span>
        <input matInput
               (keyup)="applyFilter($event)"
               placeholder="Digite nome, email, CRP..."
               #input>
        <button matSuffix
                mat-icon-button
                *ngIf="input.value"
                (click)="clearFilter(input)"
                class="clear-button">
          <span class="material-symbols-outlined">close</span>
        </button>
      </mat-form-field>
    </div>

    <!-- Table Section -->
    <div class="table-container">
      <table mat-table [dataSource]="dataSource" matSort class="modern-table">
        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
          <td mat-cell *matCellDef="let row">
            <span class="cell-id">#{{row.Id}}</span>
          </td>
        </ng-container>

        <!-- Nome Column -->
        <ng-container matColumnDef="nome">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Nome </th>
          <td mat-cell *matCellDef="let row">
            <div class="cell-with-icon">
              <span class="material-symbols-outlined">person</span>
              <span>{{row.Nome}}</span>
            </div>
          </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
          <td mat-cell *matCellDef="let row">
            <div class="cell-with-icon">
              <span class="material-symbols-outlined">mail</span>
              <span class="cell-email">{{row.Email}}</span>
            </div>
          </td>
        </ng-container>

        <!-- CRP Column -->
        <ng-container matColumnDef="crp">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> CRP </th>
          <td mat-cell *matCellDef="let row">
            <span class="cell-badge">{{row.Crp}}</span>
          </td>
        </ng-container>

        <!-- Especialidade Column -->
        <ng-container matColumnDef="especialidade">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Especialidade </th>
          <td mat-cell *matCellDef="let row">
            <span class="cell-badge secondary">{{row.Especialidade}}</span>
          </td>
        </ng-container>

        <!-- Ações Column -->
        <ng-container matColumnDef="acoes">
          <th mat-header-cell *matHeaderCellDef> Ações </th>
          <td mat-cell *matCellDef="let row">
            <div class="action-buttons">
              <app-button button="Editar" (clicked)="editarPsicologo(row)"></app-button>
              <app-button button="Excluir" (clicked)="excluirPsicologo(row)"></app-button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>

        <!-- Empty State -->
        <tr class="mat-row no-data-row" *matNoDataRow>
          <td class="mat-cell no-data-cell" [attr.colspan]="displayedColumns.length">
            <div class="empty-state">
              <span class="material-symbols-outlined">search_off</span>
              <p>Nenhum psicólogo encontrado</p>
              <span class="empty-hint" *ngIf="input.value">Tente buscar por: "{{input.value}}"</span>
            </div>
          </td>
        </tr>
      </table>
    </div>

    <!-- Pagination -->
    <mat-paginator
      [pageSizeOptions]="[5, 10, 20, 50]"
      [pageSize]="10"
      showFirstLastButtons
      aria-label="Selecione a página">
    </mat-paginator>
  </div>
</div>
